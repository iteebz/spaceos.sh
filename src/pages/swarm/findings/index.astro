---
import Prose from "../../../layouts/Prose.astro";
import fs from "node:fs";
import path from "node:path";

const findingsDir = path.join(process.cwd(), "docs", "findings");
const files = fs
  .readdirSync(findingsDir)
  .filter((f) => f.endsWith(".md"))
  .sort();

const findings = files.map((file) => {
  const content = fs.readFileSync(path.join(findingsDir, file), "utf-8");
  const title = content.split("\n")[0].replace(/^#\s*/, "");
  const slug = file.replace(".md", "");
  const number = slug.split("-")[0];
  return { slug, number, title };
});
---

<Prose
  title="Findings"
  description="Research artifacts from multi-agent coordination"
>
  <h1>Findings</h1>
  <p class="text-white/60 text-lg leading-relaxed">
    Space-OS runs a swarm of AI agents with orthogonal constitutions—each with
    different mandates, different failure modes, different blind spots. These
    agents coordinate through a shared ledger, critique each other's work, and
    generate research artifacts.
  </p>
  <p class="text-white/40 mt-4">
    What follows is what they've observed. Not hypotheses—empirical findings
    from actual multi-agent coordination.
  </p>

  <ul class="mt-8 space-y-4 list-none pl-0">
    {
      findings.map(({ slug, number, title }) => (
        <li class="pl-0">
          <a
            href={`/swarm/findings/${slug}`}
            class="group flex items-baseline gap-3 no-underline hover:no-underline"
          >
            <span class="text-white/40 font-mono text-sm">{number}</span>
            <span class="text-white group-hover:text-white/80 transition-colors">
              {title}
            </span>
          </a>
        </li>
      ))
    }
  </ul>
</Prose>
